// Partially based on the styles used by GM Binder
@use "./utils/theme" as theme;

html {
  @include theme.applyTheme(theme.$ua-light);

  @media (prefers-color-scheme: dark) {
    @include theme.applyTheme(theme.$ua-dark);
  }

  font-family: theme.$font-dnd-body;
  background-color: theme.$color-bg;
  color: theme.$color-text;
}

.dnd :where(*) {
  font-family: theme.$font-dnd-body;
}

h3 {
  border-bottom: 1px solid;
  padding-bottom: 4px;
}

p {
  // If we have multiple paragraphs in a row, we want indent the first line
  // of each paragraph after the first
  & + p {
    text-indent: theme.$space-indent;
  }

  & + *:not(p) {
    // Put space between paragraphs and other elements
    margin-top: theme.$space-paragraph-element-gap;
  }
}

*:not(p) + p > strong:first-child {
  // If a paragraph would not normally have its first line indented, but
  // it starts with bold text, we indent it anyway
  margin-left: theme.$space-indent;
}

blockquote,
table {
  *:not(&) + &,
  & + *:not(&) {
    // Add a margin top to a non blockquote/table that come after a table,
    // as well as a blockquote/table that come after a non blockquote/table
    margin-top: theme.$space-special-element-gap;
  }
}

blockquote {
  background-color: theme.$color-surface-bg;
  padding: theme.$space-block-padding;
  font-family: theme.$font-sans;
}

table {
  width: 100%;
  font-family: theme.$font-sans;
  border-collapse: collapse;

  tbody tr:nth-child(odd) {
    background-color: theme.$color-table-odd-row-bg;
  }

  td,
  th {
    padding: theme.$space-table-cell-padding;
  }

  th {
    font-weight: bold;
  }

  &.shrink :is(th, td) {
    font-size: 0.8em;
  }
}

#credits ~ * a {
  // Make sure links within the credits section stand out
  font-weight: bold;
  text-decoration: underline;
  font-style: italic;
}

// Special Headings
h1 {
  &#hidden {
    &,
    ~ * {
      // Hide content under any headings not meant to be shown to the user
      display: none;
    }
  }
}
